<!-- pages/feedback-detail/feedback-detail.wxml -->
<view class="page-feedback-detail">
    <!-- åŠ è½½ä¸­ -->
    <view class="loading-box" wx:if="{{loading}}">
        <view class="loading-spinner"></view>
    </view>

    <block wx:else>
        <!-- çŠ¶æ€å¡ç‰‡ -->
        <view class="status-card {{feedback.status}}">
            <view class="status-icon">
                <text wx:if="{{feedback.status === 'pending'}}">â³</text>
                <text wx:elif="{{feedback.status === 'processing'}}">ğŸ”„</text>
                <text wx:elif="{{feedback.status === 'resolved'}}">âœ…</text>
                <text wx:else>ğŸ“‹</text>
            </view>
            <view class="status-info">
                <text class="status-text">{{feedback.status_text}}</text>
                <text class="status-desc">{{feedback.status_desc}}</text>
            </view>
        </view>

        <!-- åé¦ˆå†…å®¹ -->
        <view class="section-card">
            <view class="section-header">
                <text class="section-title">åé¦ˆå†…å®¹</text>
                <view class="type-tag">{{feedback.type_text}}</view>
            </view>
            <view class="feedback-content">{{feedback.content}}</view>
            <view class="feedback-meta">
                <text class="meta-item">æäº¤æ—¶é—´ï¼š{{feedback.created_date}}</text>
                <text class="meta-item" wx:if="{{feedback.contact}}">è”ç³»æ–¹å¼ï¼š{{feedback.contact}}</text>
            </view>
        </view>

        <!-- å®¢æœå›å¤ -->
        <view class="section-card reply-card" wx:if="{{feedback.reply}}">
            <view class="section-header">
                <text class="section-title">å®¢æœå›å¤</text>
            </view>
            <view class="reply-content">{{feedback.reply}}</view>
            <view class="reply-meta">
                <text class="meta-item">å›å¤æ—¶é—´ï¼š{{feedback.replied_date}}</text>
            </view>
        </view>

        <!-- ç­‰å¾…å›å¤æç¤º -->
        <view class="waiting-card" wx:if="{{!feedback.reply && (feedback.status === 'pending' || feedback.status === 'processing')}}">
            <text class="waiting-icon">ğŸ’¬</text>
            <text class="waiting-text">å®¢æœæ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…...</text>
        </view>
    </block>
</view>
