<!-- pages/index/index.wxml - é¦–é¡µ -->
<view class="page-index">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input" bindtap="goToSearch">
      <text class="search-icon">ğŸ”</text>
      <text class="search-placeholder">æœç´¢é²œå¥¶äº§å“</text>
    </view>
  </view>

  <!-- è½®æ’­å›¾ -->
  <swiper class="banner" indicator-dots autoplay circular interval="4000">
    <swiper-item wx:for="{{banners}}" wx:key="id">
      <image class="banner-image" src="{{item.image}}" mode="aspectFill" />
    </swiper-item>
  </swiper>

  <!-- å‘¨æœŸè´­å…¥å£ -->
  <view class="subscription-banner" bindtap="goToSubscription">
    <view class="subscription-content">
      <text class="subscription-badge">å‘¨æœŸè´­</text>
      <text class="subscription-title">è®¢é˜…é²œå¥¶ï¼Œæ¯æ—¥ç›´è¾¾</text>
      <text class="subscription-desc">å‘¨æœŸè´­äº«9æŠ˜ä¼˜æƒ </text>
    </view>
    <text class="subscription-arrow">></text>
  </view>

  <!-- çŒœä½ å–œæ¬¢ -->
  <view class="section guess-section">
    <view class="section-header guess-header">
      <view class="guess-title-wrap">
        <text class="guess-icon">ğŸ’™</text>
        <text class="section-title">çŒœä½ å–œæ¬¢</text>
      </view>
      <text class="section-more" bindtap="goToProducts" data-filter="recommend">æ¢ä¸€æ‰¹</text>
    </view>
    <view class="guess-grid">
      <view class="guess-card" wx:for="{{guessProducts}}" wx:key="id" bindtap="goToProduct" data-id="{{item.id}}">
        <view class="guess-image-wrap">
          <image class="guess-image" src="{{item.cover_image}}" mode="aspectFill" />
          <view class="product-tags" wx:if="{{item.original_price}}">
            <text class="tag tag-promo">æ´»åŠ¨ä¿ƒé”€</text>
          </view>
        </view>
        <view class="guess-info">
          <text class="guess-name">{{item.name}}</text>
          <text class="guess-spec">{{item.specification}}</text>
          <view class="guess-footer">
            <text class="guess-price">Â¥{{item.price}}</text>
            <view class="guess-cart-btn" catchtap="addToCart" data-product="{{item}}">ğŸ›’</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- çƒ­é—¨æ¨è -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">ğŸ”¥ çƒ­é—¨æ¨è</text>
      <text class="section-more" bindtap="goToProducts" data-filter="hot">æ›´å¤š ></text>
    </view>
    <scroll-view class="product-scroll" scroll-x>
      <view class="product-card" wx:for="{{hotProducts}}" wx:key="id" bindtap="goToProduct" data-id="{{item.id}}">
        <image class="product-image" src="{{item.cover_image}}" mode="aspectFill" />
        <view class="product-tags" wx:if="{{item.is_hot || item.is_new || item.original_price}}">
          <text class="tag tag-hot" wx:if="{{item.is_hot}}">çƒ­é—¨</text>
          <text class="tag tag-new" wx:if="{{item.is_new}}">æ–°å“</text>
          <text class="tag tag-promo" wx:if="{{item.original_price}}">æ´»åŠ¨ä¿ƒé”€</text>
        </view>
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          <text class="product-spec">{{item.specification}}</text>
          <view class="product-footer">
            <view>
              <text class="price">{{item.price}}</text>
              <text class="price-original" wx:if="{{item.original_price}}">Â¥{{item.original_price}}</text>
            </view>
            <view class="add-cart-btn" catchtap="addToCart" data-product="{{item}}">+</view>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æ–°å“ä¸Šå¸‚ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">ğŸŒŸ æ–°å“ä¸Šå¸‚</text>
      <text class="section-more" bindtap="goToProducts" data-filter="new">æ›´å¤š ></text>
    </view>
    <view class="product-grid">
      <view class="product-card-grid" wx:for="{{newProducts}}" wx:key="id" bindtap="goToProduct" data-id="{{item.id}}">
        <image class="product-image-grid" src="{{item.cover_image}}" mode="aspectFill" />
        <view class="product-tags" wx:if="{{item.is_hot || item.is_new || item.original_price}}">
          <text class="tag tag-hot" wx:if="{{item.is_hot}}">çƒ­é—¨</text>
          <text class="tag tag-new" wx:if="{{item.is_new}}">æ–°å“</text>
          <text class="tag tag-promo" wx:if="{{item.original_price}}">æ´»åŠ¨ä¿ƒé”€</text>
        </view>
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          <text class="product-spec">{{item.specification}}</text>
          <view class="product-footer">
            <view>
              <text class="price">{{item.price}}</text>
              <text class="price-original" wx:if="{{item.original_price}}">Â¥{{item.original_price}}</text>
            </view>
            <view class="add-cart-btn" catchtap="addToCart" data-product="{{item}}">+</view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
