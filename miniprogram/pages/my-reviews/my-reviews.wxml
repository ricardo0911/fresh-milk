<!-- pages/my-reviews/my-reviews.wxml -->
<view class="page-my-reviews">
    <!-- åŠ è½½ä¸­ -->
    <view class="loading-box" wx:if="{{loading}}">
        <view class="loading-spinner"></view>
        <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-box" wx:elif="{{isEmpty}}">
        <text class="empty-icon">ğŸ“</text>
        <text class="empty-text">æš‚æ— è¯„ä»·è®°å½•</text>
        <text class="empty-desc">è´­ä¹°å•†å“åå¯ä»¥å‘è¡¨è¯„ä»·å“¦</text>
    </view>

    <!-- è¯„ä»·åˆ—è¡¨ -->
    <view class="review-list" wx:else>
        <view class="review-item" wx:for="{{reviews}}" wx:key="id">
            <!-- å•†å“ä¿¡æ¯ -->
            <view class="product-info" bindtap="goToProduct" data-id="{{item.product}}">
                <image class="product-image" src="{{item.product_image}}" mode="aspectFill"></image>
                <view class="product-detail">
                    <text class="product-name">{{item.product_name}}</text>
                    <view class="rating-row">
                        <view class="stars">
                            <text class="star {{idx < item.rating ? 'active' : ''}}" wx:for="{{5}}" wx:for-index="idx" wx:key="idx">â˜…</text>
                        </view>
                        <text class="rating-text">{{item.rating_text}}</text>
                    </view>
                </view>
            </view>

            <!-- è¯„ä»·å†…å®¹ -->
            <view class="review-content">{{item.content}}</view>

            <!-- è¯„ä»·å›¾ç‰‡ -->
            <view class="review-images" wx:if="{{item.images && item.images.length > 0}}">
                <image
                    wx:for="{{item.images}}"
                    wx:for-item="img"
                    wx:key="*this"
                    class="review-image"
                    src="{{img}}"
                    mode="aspectFill"
                    bindtap="previewImage"
                    data-current="{{img}}"
                    data-urls="{{item.images}}"
                ></image>
            </view>

            <!-- è¯„ä»·æ—¶é—´ -->
            <view class="review-time">{{item.created_date}}</view>

            <!-- å•†å®¶å›å¤ -->
            <view class="reply-box" wx:if="{{item.reply}}">
                <view class="reply-header">
                    <text class="reply-label">å•†å®¶å›å¤</text>
                    <text class="reply-time">{{item.replied_date}}</text>
                </view>
                <view class="reply-content">{{item.reply}}</view>
            </view>
        </view>
    </view>
</view>
