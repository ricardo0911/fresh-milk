<!-- pages/order-result/order-result.wxml - 支付结果页 -->
<view class="page-result">
  <!-- 成功状态 -->
  <view class="result-card" wx:if="{{status === 'success'}}">
    <view class="result-icon success">
      <view class="check-icon">✓</view>
    </view>
    <text class="result-title">支付成功</text>
    <view class="result-amount-wrap">
      <text class="result-currency">¥</text>
      <text class="result-amount">{{amount}}</text>
    </view>
    <view class="result-info">
      <view class="info-row">
        <text class="info-label">订单编号</text>
        <text class="info-value">{{orderId}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">支付方式</text>
        <text class="info-value">{{payMethod}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">支付时间</text>
        <text class="info-value">{{payTime}}</text>
      </view>
    </view>
  </view>

  <!-- 失败状态 -->
  <view class="result-card" wx:if="{{status === 'fail'}}">
    <view class="result-icon fail">
      <view class="fail-icon">×</view>
    </view>
    <text class="result-title">支付失败</text>
    <text class="result-desc">{{message || '请重新尝试支付'}}</text>
    <button class="retry-btn" bindtap="retryPay">重新支付</button>
  </view>

  <!-- 待支付状态 -->
  <view class="result-card" wx:if="{{status === 'pending'}}">
    <view class="result-icon pending">
      <view class="pending-icon">!</view>
    </view>
    <text class="result-title">待支付</text>
    <view class="result-amount-wrap">
      <text class="result-currency">¥</text>
      <text class="result-amount">{{amount}}</text>
    </view>
    <text class="result-desc">订单已创建，请尽快完成支付</text>
    <view class="countdown-wrap" wx:if="{{countdown > 0}}">
      <text class="countdown-text">剩余支付时间：{{countdownText}}</text>
    </view>
    <button class="pay-now-btn" bindtap="payNow">立即支付</button>
  </view>

  <!-- 按钮组 -->
  <view class="action-buttons">
    <button class="btn btn-outline" bindtap="viewOrder">查看订单</button>
    <button class="btn btn-primary" bindtap="goHome">返回首页</button>
  </view>

  <!-- 温馨提示 -->
  <view class="tips-section" wx:if="{{status === 'success'}}">
    <view class="tips-title">温馨提示</view>
    <view class="tips-content">
      <text class="tips-item">• 您的订单将在24小时内配送</text>
      <text class="tips-item">• 配送前会有短信通知</text>
      <text class="tips-item">• 如有问题请联系客服</text>
    </view>
  </view>

  <!-- 推荐商品 -->
  <view class="recommend-section" wx:if="{{status === 'success' && recommendProducts.length > 0}}">
    <text class="section-title">猜你喜欢</text>
    <scroll-view class="product-scroll" scroll-x enable-flex>
      <view class="product-card" wx:for="{{recommendProducts}}" wx:key="id" bindtap="goToProduct" data-id="{{item.id}}">
        <image class="product-image" src="{{item.cover_image}}" mode="aspectFill" />
        <view class="product-info">
          <text class="product-name">{{item.name}}</text>
          <text class="product-price">¥{{item.price}}</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view>
