<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¢å•ç®¡ç† - Fresh Milk ç®¡ç†åå°</title>
    <link rel="stylesheet" href="css/admin.css">
</head>

<body>
    <div class="admin-container">
        <!-- ä¾§è¾¹å¯¼èˆª -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">ğŸ¥›</span>
                    <span class="logo-text">Fresh Milk</span>
                </div>
            </div>
            <nav class="nav-menu">
                <a href="index.html" class="nav-item"><span class="nav-icon">ğŸ“Š</span><span
                        class="nav-label">æ•°æ®æ¦‚è§ˆ</span></a>
                <a href="orders.html" class="nav-item active"><span class="nav-icon">ğŸ“¦</span><span
                        class="nav-label">è®¢å•ç®¡ç†</span></a>
                <a href="products.html" class="nav-item"><span class="nav-icon">ğŸ›’</span><span
                        class="nav-label">å•†å“ç®¡ç†</span></a>
                <a href="users.html" class="nav-item"><span class="nav-icon">ğŸ‘¥</span><span
                        class="nav-label">ç”¨æˆ·ç®¡ç†</span></a>
                <a href="subscriptions.html" class="nav-item"><span class="nav-icon">ğŸ”„</span><span
                        class="nav-label">å‘¨æœŸè´­ç®¡ç†</span></a>
                <a href="delivery.html" class="nav-item"><span class="nav-icon">ğŸšš</span><span
                        class="nav-label">é…é€ç®¡ç†</span></a>
                <a href="reviews.html" class="nav-item"><span class="nav-icon">â­</span><span
                        class="nav-label">è¯„ä»·ç®¡ç†</span></a>
                <a href="aftersales.html" class="nav-item"><span class="nav-icon">ğŸ”§</span><span
                        class="nav-label">å”®åç®¡ç†</span></a>
                <a href="coupons.html" class="nav-item"><span class="nav-icon">ğŸ«</span><span
                        class="nav-label">ä¼˜æƒ åˆ¸ç®¡ç†</span></a>
                <a href="promotions.html" class="nav-item"><span class="nav-icon">ğŸ‰</span><span
                        class="nav-label">ä¿ƒé”€æ´»åŠ¨</span></a>
                <a href="members.html" class="nav-item"><span class="nav-icon">ğŸ‘‘</span><span
                        class="nav-label">ä¼šå‘˜ç­‰çº§</span></a>
            </nav>
        </aside>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <header class="top-header">
                <div class="page-info">
                    <h1 class="page-title">è®¢å•ç®¡ç†</h1>
                    <p class="page-subtitle">ç®¡ç†æ‰€æœ‰è®¢å•ï¼Œå¤„ç†å‘è´§å’Œå”®å</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-outline" onclick="exportOrders()">ğŸ“¥ å¯¼å‡ºè®¢å•</button>
                </div>
            </header>

            <!-- è®¢å•ç­›é€‰ -->
            <section class="filter-section">
                <div class="filter-tabs">
                    <button class="filter-tab active" data-status="all">å…¨éƒ¨ <span class="count">156</span></button>
                    <button class="filter-tab" data-status="pending">å¾…ä»˜æ¬¾ <span class="count">8</span></button>
                    <button class="filter-tab" data-status="paid">å¾…å‘è´§ <span class="count">5</span></button>
                    <button class="filter-tab" data-status="shipped">é…é€ä¸­ <span class="count">12</span></button>
                    <button class="filter-tab" data-status="delivered">å·²é€è¾¾ <span class="count">23</span></button>
                    <button class="filter-tab" data-status="completed">å·²å®Œæˆ <span class="count">108</span></button>
                </div>
                <div class="filter-bar">
                    <input type="text" class="search-input" placeholder="æœç´¢è®¢å•å·/ç”¨æˆ·å/æ‰‹æœºå·">
                    <input type="date" class="date-input" id="startDate">
                    <span>è‡³</span>
                    <input type="date" class="date-input" id="endDate">
                    <button class="btn btn-primary">ğŸ” æœç´¢</button>
                </div>
            </section>

            <!-- è®¢å•åˆ—è¡¨ -->
            <section class="table-section">
                <table class="data-table full-width">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectAll"></th>
                            <th>è®¢å•å·</th>
                            <th>ç”¨æˆ·ä¿¡æ¯</th>
                            <th>å•†å“ä¿¡æ¯</th>
                            <th>è®¢å•é‡‘é¢</th>
                            <th>è®¢å•çŠ¶æ€</th>
                            <th>ä¸‹å•æ—¶é—´</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="ordersTable">
                        <tr>
                            <td><input type="checkbox"></td>
                            <td class="order-no">FM20240116028</td>
                            <td class="user-info">
                                <span class="user-name">å¼ ä¸‰</span>
                                <span class="user-phone">138****8888</span>
                            </td>
                            <td class="product-info">
                                <div class="product-item">
                                    <img src="https://images.unsplash.com/photo-1563636619-e9143da7973b?w=50&q=80"
                                        alt="">
                                    <span>æ¯æ—¥é²œç‰›å¥¶ 250mlÃ—10 Ã—2</span>
                                </div>
                            </td>
                            <td class="order-amount">Â¥89.80</td>
                            <td><span class="status paid">å¾…å‘è´§</span></td>
                            <td class="order-time">2024-01-16 10:30</td>
                            <td class="actions">
                                <button class="btn-action" onclick="viewOrder('FM20240116028')">æŸ¥çœ‹</button>
                                <button class="btn-action primary" onclick="shipOrder('FM20240116028')">å‘è´§</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td class="order-no">FM20240116027</td>
                            <td class="user-info">
                                <span class="user-name">æå››</span>
                                <span class="user-phone">139****9999</span>
                            </td>
                            <td class="product-info">
                                <div class="product-item">
                                    <img src="https://images.unsplash.com/photo-1550583724-b2692b85b150?w=50&q=80"
                                        alt="">
                                    <span>A2è›‹ç™½é²œç‰›å¥¶ 260mlÃ—8 Ã—1</span>
                                </div>
                            </td>
                            <td class="order-amount">Â¥156.00</td>
                            <td><span class="status shipped">é…é€ä¸­</span></td>
                            <td class="order-time">2024-01-16 09:15</td>
                            <td class="actions">
                                <button class="btn-action" onclick="viewOrder('FM20240116027')">æŸ¥çœ‹</button>
                                <button class="btn-action" onclick="trackDelivery('FM20240116027')">è¿½è¸ª</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td class="order-no">FM20240116026</td>
                            <td class="user-info">
                                <span class="user-name">ç‹äº”</span>
                                <span class="user-phone">137****7777</span>
                            </td>
                            <td class="product-info">
                                <div class="product-item">
                                    <img src="https://images.unsplash.com/photo-1628088062854-d1870b4553da?w=50&q=80"
                                        alt="">
                                    <span>æœ‰æœºçº¯ç‰›å¥¶ 200mlÃ—12 Ã—1</span>
                                </div>
                            </td>
                            <td class="order-amount">Â¥68.50</td>
                            <td><span class="status completed">å·²å®Œæˆ</span></td>
                            <td class="order-time">2024-01-15 16:20</td>
                            <td class="actions">
                                <button class="btn-action" onclick="viewOrder('FM20240116026')">æŸ¥çœ‹</button>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td class="order-no">FM20240116025</td>
                            <td class="user-info">
                                <span class="user-name">èµµå…­</span>
                                <span class="user-phone">136****6666</span>
                            </td>
                            <td class="product-info">
                                <div class="product-item">
                                    <img src="https://images.unsplash.com/photo-1563636619-e9143da7973b?w=50&q=80"
                                        alt="">
                                    <span>ä½è„‚é²œç‰›å¥¶ 500mlÃ—6 Ã—2</span>
                                </div>
                            </td>
                            <td class="order-amount">Â¥245.00</td>
                            <td><span class="status pending">å¾…ä»˜æ¬¾</span></td>
                            <td class="order-time">2024-01-16 08:45</td>
                            <td class="actions">
                                <button class="btn-action" onclick="viewOrder('FM20240116025')">æŸ¥çœ‹</button>
                                <button class="btn-action danger" onclick="cancelOrder('FM20240116025')">å–æ¶ˆ</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- åˆ†é¡µ -->
                <div class="pagination">
                    <span class="page-info">å…± 156 æ¡è®°å½•ï¼Œç¬¬ 1/16 é¡µ</span>
                    <div class="page-btns">
                        <button class="page-btn" disabled>ä¸Šä¸€é¡µ</button>
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <span>...</span>
                        <button class="page-btn">16</button>
                        <button class="page-btn">ä¸‹ä¸€é¡µ</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- è®¢å•è¯¦æƒ…å¼¹çª— -->
    <div class="modal" id="orderModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>è®¢å•è¯¦æƒ…</h3>
                <button class="modal-close" onclick="closeModal('orderModal')">Ã—</button>
            </div>
            <div class="modal-body" id="orderDetailContent">
                <!-- åŠ¨æ€å¡«å…… -->
            </div>
        </div>
    </div>

    <script src="js/admin.js"></script>
    <script>
        // æ¨¡æ‹Ÿè®¢å•æ•°æ®
        const ordersData = {
            'FM20240116028': {
                orderId: 'FM20240116028',
                status: 'å¾…å‘è´§',
                statusClass: 'paid',
                user: { name: 'å¼ ä¸‰', phone: '13888888888', avatar: 'https://i.pravatar.cc/40?img=1' },
                address: 'æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºæ–‡ä¸‰è·¯999å· æ–‡ä¸‰å¤§å¦ Aåº§ 1808å®¤',
                products: [
                    { name: 'æ¯æ—¥é²œç‰›å¥¶', spec: '250mlÃ—10ç“¶', price: 39.90, qty: 2, image: 'https://images.unsplash.com/photo-1563636619-e9143da7973b?w=80&q=80' }
                ],
                subtotal: 79.80,
                shipping: 10.00,
                discount: 0,
                total: 89.80,
                payMethod: 'å¾®ä¿¡æ”¯ä»˜',
                createTime: '2024-01-16 10:30:00',
                payTime: '2024-01-16 10:31:25',
                remark: 'è¯·æ”¾é—¨å£ï¼Œè°¢è°¢'
            },
            'FM20240116027': {
                orderId: 'FM20240116027',
                status: 'é…é€ä¸­',
                statusClass: 'shipped',
                user: { name: 'æå››', phone: '13999999999', avatar: 'https://i.pravatar.cc/40?img=2' },
                address: 'æµ™æ±Ÿçœæ­å·å¸‚æ»¨æ±ŸåŒºæ±Ÿå—å¤§é“888å· æµ·åˆ›åŸºåœ° Bæ ‹ 502',
                products: [
                    { name: 'A2è›‹ç™½é²œç‰›å¥¶', spec: '260mlÃ—8ç“¶', price: 156.00, qty: 1, image: 'https://images.unsplash.com/photo-1550583724-b2692b85b150?w=80&q=80' }
                ],
                subtotal: 156.00,
                shipping: 0,
                discount: 0,
                total: 156.00,
                payMethod: 'æ”¯ä»˜å®',
                createTime: '2024-01-16 09:15:00',
                payTime: '2024-01-16 09:16:42',
                deliveryMan: { name: 'å¼ å¸ˆå‚…', phone: '15800001111' },
                remark: ''
            },
            'FM20240116026': {
                orderId: 'FM20240116026',
                status: 'å·²å®Œæˆ',
                statusClass: 'completed',
                user: { name: 'ç‹äº”', phone: '13777777777', avatar: 'https://i.pravatar.cc/40?img=3' },
                address: 'æµ™æ±Ÿçœæ­å·å¸‚ä½™æ­åŒºæœªæ¥ç§‘æŠ€åŸ æµ·åˆ›å›­ 3å·æ¥¼ 1201',
                products: [
                    { name: 'æœ‰æœºçº¯ç‰›å¥¶', spec: '200mlÃ—12ç›’', price: 68.50, qty: 1, image: 'https://images.unsplash.com/photo-1628088062854-d1870b4553da?w=80&q=80' }
                ],
                subtotal: 68.50,
                shipping: 0,
                discount: 0,
                total: 68.50,
                payMethod: 'å¾®ä¿¡æ”¯ä»˜',
                createTime: '2024-01-15 16:20:00',
                payTime: '2024-01-15 16:21:15',
                completeTime: '2024-01-16 08:30:00',
                remark: ''
            },
            'FM20240116025': {
                orderId: 'FM20240116025',
                status: 'å¾…ä»˜æ¬¾',
                statusClass: 'pending',
                user: { name: 'èµµå…­', phone: '13666666666', avatar: 'https://i.pravatar.cc/40?img=4' },
                address: 'æµ™æ±Ÿçœæ­å·å¸‚æ‹±å¢…åŒºä¸°æ½­è·¯388å· åŸè¥¿é“¶æ³° Båº§ 2205',
                products: [
                    { name: 'ä½è„‚é²œç‰›å¥¶', spec: '500mlÃ—6ç“¶', price: 122.50, qty: 2, image: 'https://images.unsplash.com/photo-1563636619-e9143da7973b?w=80&q=80' }
                ],
                subtotal: 245.00,
                shipping: 0,
                discount: 0,
                total: 245.00,
                payMethod: '-',
                createTime: '2024-01-16 08:45:00',
                remark: 'å‘¨æœ«é…é€'
            }
        };

        // è®¢å•ç®¡ç†é€»è¾‘
        function viewOrder(orderId) {
            const order = ordersData[orderId];
            if (!order) {
                alert('è®¢å•ä¸å­˜åœ¨');
                return;
            }

            let productsHtml = order.products.map(p => `
                <div class="detail-product-item">
                    <img src="${p.image}" alt="${p.name}">
                    <div class="product-detail">
                        <span class="name">${p.name}</span>
                        <span class="spec">${p.spec}</span>
                    </div>
                    <div class="product-price">
                        <span class="price">Â¥${p.price.toFixed(2)}</span>
                        <span class="qty">Ã—${p.qty}</span>
                    </div>
                </div>
            `).join('');

            let deliveryHtml = order.deliveryMan ? `
                <div class="detail-section">
                    <h4>ğŸšš é…é€ä¿¡æ¯</h4>
                    <div class="detail-row">
                        <span class="label">é…é€å‘˜ï¼š</span>
                        <span class="value">${order.deliveryMan.name}</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">è”ç³»ç”µè¯ï¼š</span>
                        <span class="value">${order.deliveryMan.phone}</span>
                    </div>
                </div>
            ` : '';

            const html = `
                <div class="order-detail-view">
                    <div class="detail-header">
                        <span class="detail-order-no">è®¢å•å·ï¼š${order.orderId}</span>
                        <span class="status ${order.statusClass}">${order.status}</span>
                    </div>
                    
                    <div class="detail-section">
                        <h4>ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯</h4>
                        <div class="detail-user">
                            <img src="${order.user.avatar}" class="user-avatar">
                            <div>
                                <span class="user-name">${order.user.name}</span>
                                <span class="user-phone">${order.user.phone}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h4>ğŸ“ æ”¶è´§åœ°å€</h4>
                        <p class="address-text">${order.address}</p>
                    </div>
                    
                    <div class="detail-section">
                        <h4>ğŸ›’ å•†å“ä¿¡æ¯</h4>
                        <div class="detail-products">${productsHtml}</div>
                    </div>
                    
                    ${deliveryHtml}
                    
                    <div class="detail-section">
                        <h4>ğŸ’° è´¹ç”¨æ˜ç»†</h4>
                        <div class="detail-row"><span class="label">å•†å“é‡‘é¢ï¼š</span><span class="value">Â¥${order.subtotal.toFixed(2)}</span></div>
                        <div class="detail-row"><span class="label">è¿è´¹ï¼š</span><span class="value">Â¥${order.shipping.toFixed(2)}</span></div>
                        ${order.discount > 0 ? `<div class="detail-row"><span class="label">ä¼˜æƒ ï¼š</span><span class="value discount">-Â¥${order.discount.toFixed(2)}</span></div>` : ''}
                        <div class="detail-row total"><span class="label">å®ä»˜é‡‘é¢ï¼š</span><span class="value">Â¥${order.total.toFixed(2)}</span></div>
                    </div>
                    
                    <div class="detail-section">
                        <h4>ğŸ“‹ è®¢å•ä¿¡æ¯</h4>
                        <div class="detail-row"><span class="label">ä¸‹å•æ—¶é—´ï¼š</span><span class="value">${order.createTime}</span></div>
                        ${order.payTime ? `<div class="detail-row"><span class="label">æ”¯ä»˜æ—¶é—´ï¼š</span><span class="value">${order.payTime}</span></div>` : ''}
                        ${order.completeTime ? `<div class="detail-row"><span class="label">å®Œæˆæ—¶é—´ï¼š</span><span class="value">${order.completeTime}</span></div>` : ''}
                        <div class="detail-row"><span class="label">æ”¯ä»˜æ–¹å¼ï¼š</span><span class="value">${order.payMethod}</span></div>
                        ${order.remark ? `<div class="detail-row"><span class="label">ä¹°å®¶å¤‡æ³¨ï¼š</span><span class="value remark">${order.remark}</span></div>` : ''}
                    </div>
                </div>
            `;

            document.getElementById('orderDetailContent').innerHTML = html;
            document.getElementById('orderModal').classList.add('show');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('show');
        }

        function shipOrder(orderId) {
            if (confirm('ç¡®è®¤å‘è´§è®¢å• ' + orderId + 'ï¼Ÿ')) {
                alert('å‘è´§æˆåŠŸï¼');
                location.reload();
            }
        }

        function cancelOrder(orderId) {
            if (confirm('ç¡®è®¤å–æ¶ˆè®¢å• ' + orderId + 'ï¼Ÿ')) {
                alert('è®¢å•å·²å–æ¶ˆ');
                location.reload();
            }
        }

        function trackDelivery(orderId) {
            alert('æŸ¥çœ‹é…é€è¿½è¸ªï¼š' + orderId);
        }

        function exportOrders() {
            alert('æ­£åœ¨å¯¼å‡ºè®¢å•æ•°æ®...');
        }

        // ç­›é€‰æ ‡ç­¾åˆ‡æ¢
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', function () {
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>

</html>